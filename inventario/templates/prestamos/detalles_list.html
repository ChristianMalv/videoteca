{% extends '__basePrestamos.html' %}
{% block content %}

<table id="detalleTabla" class="table table-striped table-bordered table-responsive dataTable_width_auto display" style="width:100%">
    <thead>
        <tr>
            <th>Info</th>
            <th>Folio Pr√©stamo</th>
            <th>Usuario</th>
            <th>Fecha Vencimiento.</th>
        </tr>
    </thead>
    <tbody>
        {% for data in prestamos %}
        <tr>
            <td></td>
            <td>{{ data.pres_folio }}</td>
            <td>{{ data.usua_clave }}</td>
            <td>
                {% if data.pres_fechahora < hace_siete_dias %}
                <div class="alert alert-warning">{{ data.pres_fechahora }}</div>
                {% elif data.pres_fechahora > hace_siete_dias and data.pres_fechahora < fecha_actual %}
                <div class="alert alert-info">{{ data.pres_fechahora }}</div>
                {% else %}
                {{ data.pres_fechahora }}
                {% endif %}
            </td>
        </tr>
        {% empty %}
        {% endfor %}
    </tbody>
</table>

<script>
$(document).ready(function() {
    $('#detalleTabla').DataTable({
        ...columns,
        autoFill: {
            columns: [3]
        },
        columns: [{
                "data": "pres_folio",
                "render": function(data, type, row, meta) {
                    return "<a class='ver-detalle' data-folio='" + data + "' data-toggle='modal' data-target='#modalCintas'><i class='fa-sharp fa-solid fa-info-circle' style='color:#9D2449'></i></a>";
                }
            },
            {
                "data": "pres_folio"
            },
            {
                "data": "usua_clave"
            },
            {
                "data": "pres_fechahora"
            },
        ],
        createdRow: function(row, data, dataIndex) {
            $(row).data('folio', data.pres_folio);
        }
    });
});
    
</script>

<style>
.detalle ul {
    display: none;
}
</style>
{% endblock %}